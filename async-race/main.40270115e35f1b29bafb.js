!function(){"use strict";var e={325:function(e,t,a){a.r(t)},962:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=a(412),n=a(15),s=a(379),r=a(540),{TRACK_TAG:o,WIN_TAG:l}=s.constantsTagName;t.App=class{runApplication(){customElements.define(o,n.Track),customElements.define(l,r.Winner),(new i.Page).generateMainPageElements()}}},379:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.carNames=t.constantsSVGs=t.constantsAttributes=t.constantsClasses=t.constantsTexts=t.constantsLinks=t.constantsTagName=t.constantsNumbers=t.apiWinner=t.apiGetWinners=t.apiCarEngine=t.apiGarage=t.API_BASE_URL=void 0,t.API_BASE_URL="http://127.0.0.1:3000",t.apiGarage={getCars:{method:"GET",getCarsUrl:"/garage",optional:{pageNumUrl:"_page=",limit:{limitUrl:"_limit=",respHeader:"X-Total-Count"}}},getCar:{method:"GET",getCarUrl:"/garage/"},createCar:{method:"POST",getCarsUrl:"/garage",headers:{"Content-Type":"application/json"},dataParams:{name:"name",color:"color"},successRespCode:201},deleteCar:{method:"DELETE",deleteCarUrl:"/garage/"},updateCar:{method:"PUT",deleteCarUrl:"/garage/",headers:{"Content-Type":"application/json"},dataParams:{name:"name",color:"color"}}},t.apiCarEngine={method:"PATCH",startStopUrl:"/engine",required:{id:"id=",status:{statusUrl:"status=",params:{started:"started",stopped:"stopped",drive:"drive"}}},respContent:{velocity:"velocity",distance:"distance",success:"success"},stopCode:500},t.apiGetWinners={method:"GET",winnersUrl:"/winners",optional:{pageNum:"_page=",limit:"_limit=",sort:{sortUrl:"_sort=",params:{id:"id",wins:"wins",time:"time"}},order:{orderUrl:"_order=",params:{asc:"ASC",desc:"DESC"}}},respContent:{id:"id",wins:"wins",time:"time"},respHeader:"X-Total-Count"},t.apiWinner={getWinner:{method:"GET",getUrl:"/winners/",respContent:{id:"id",wins:"wins",time:"time"}},createWinner:{method:"POST",createUrl:"/winners",headers:{"Content-Type":"application/json"},respContent:{id:"id",wins:"wins",time:"time"}},deleteWinner:{method:"DELETE",deleteUrl:"/winners/"},updateWinner:{method:"PUT",updateUrl:"/winners/",headers:{"Content-Type":"application/json"},dataParams:{wins:"wins",time:"time"},respContent:{id:"id",wins:"wins",time:"time"}}},t.constantsNumbers={NUMBER_RANDOM_CREATED_CAR:100,NUMBER_TRACKS_PER_PAGE:7,NUMBER_ROWS_WIN_TABLE:10,MAX_SPEED:200,MIN_SPEED:50,DISTANCE:5e5},t.constantsTagName={TRACK_TAG:"car-track",WIN_TAG:"win-car"},t.constantsLinks={SWU_IMG_PATH:"./assets/images/ukraine_stand.png",GIT_LINK:"https://github.com/perseus-sergey",RSS_LINK:"https://rs.school/",API_LINK:"https://github.com/mikhama/async-race-api",RSS_IMG_PATH:"./assets/images/rs-school.png"},t.constantsTexts={H1:"Async Race",ATTENTION_INSTALL_SERVER:"There are no car in the garage!<br>Click here to install the server.",SWU_IMG_ALT:"Stand With Ukraine",RSS_IMG_ALT:"Rss School reference",COPYRIGHT_TEXT:"Created 2023",BTN_STOP_RACE_TEXT:"RESET",BTN_START_RACE_TEXT:"START RACE",BTN_CREATE_CARS_TEXT:"CREATE CARS",CREATE_CAR_SUBMIT:"CREATE",UPDATE_CAR_SUBMIT:"UPDATE",BTN_TRACK_SELECT_CAR:"SELECT",BTN_TRACK_REMOVE_CAR:"REMOVE",BTN_TRACK_STOP_CAR:"◾",BTN_TRACK_START_CAR:"▶",DEFAULT_UPDATE_COLOR:"#ffe942",DEFAULT_CREATE_COLOR:"#06a6f6",GARAGE_TITLE:"Garage",WIN_PAGE_TITLE:"Winners",BTN_PAGIN_TEXT_LEFT:"⋖",BTN_PAGIN_TEXT_RIGHT:"⋗",BTN_PAGIN_TEXT_LAST:"⋙",BTN_PAGIN_TEXT_FIRST:"⋘",NEXT_PAGE:"To Winners",PREV_PAGE:"To Garage",TRACK_CAR_WINNER_TITLE:"!!! WINNER",WIN_TBL_TITLE_ROW_1:"Number",WIN_TBL_TITLE_ROW_2:"Car",WIN_TBL_TITLE_ROW_3:"Name",WIN_TBL_TITLE_ROW_4:"Wins",WIN_TBL_TITLE_ROW_5:"Best Time (s)"},t.constantsClasses={CREATE_CAR_SUBMIT_CLASS:"create-car-submit",UPDATE_CAR_SUBMIT_CLASS:"update-car-submit",ACTIVE:"active",HEADER:"header",INSTALL_SERVER:"message-not-server",SWU_IMG:"swu-img",MAIN:"main",FOOTER:"footer",RSS_LINK_CLASS:"rss-ref",API_LINK_CLASS:"api-ref",RSS_LINK_IMG:"rss-ref__img",COPYRIGHT:"copyright",TRACK_BTNS_WRAPPER:"track-btns-wrapper",TRACK_CAR_NAME:"track__car-name",TRACK_CAR_WINNER_TAG:"track__car-winner",CAR:"car",FINISH_FLAG:"finish-flag",GARAGE:"garage",TRACKS_TAG:"tracks",WIN_SHOW:"show",GARAGE_HIDE:"hide",WRAP_RACE_BUTTONS:"race-btns-wrapper",BTN_STOP_RACE:"btn-race-stop",BTN_START_RACE:"btn-race-start",BTN_CREATE_CARS:"btn-create-cars",CONTROL_PANEL:"control-panel",INP_CREATE_CAR_NAME:"create-car__name",INP_CREATE_CAR_COLOR:"create-car__color",INP_UPDATE_CAR_NAME:"update-car__name",INP_UPDATE_CAR_COLOR:"update-car__color",BTN_ANIMATION:"button-hit",PAGIN_WRAPPER:"pagination-wrapper",BTN_PAGIN_LEFT:"btn-pagination-left",BTN_PAGIN_RIGHT:"btn-pagination-right",BTN_PAGIN_LAST:"btn-pagination-last",BTN_PAGIN_FIRST:"btn-pagination-first",PAGIN_CURRENT:"pagination-current",HIDE_PAGINATION:"pagination-hidden",IS_RACING:"is-racing",BTN_TRACK_SELECT_CAR_STYLE:"btn-select-car",BTN_TRACK_REMOVE_CAR_STYLE:"btn-remove-car",BTN_TRACK_STOP_CAR_STYLE:"btn-stop-car",BTN_TRACK_START_CAR_STYLE:"btn-start-car",SWITCH_PAGE_BTN_WRAP:"btn-swith-page-wrap",NEXT_PAGE_BTN:"btn-next-page",PREV_PAGE_BTN:"btn-prev-page",WIN_PAGE:"win-page",WIN_TABLE:"win-table",WIN_TBL_BODY:"win-table__body",WIN_TBL_TITLE_ROW:"win-table__title-row",WIN_TBL_ROW:"win-table__row",WIN_TBL_WINS_SORT:"win-table__wins-sort",WIN_TBL_TIME_SORT:"win-table__time-sort",ASC_SORT:"asc"},t.constantsAttributes={ATTR_CAR_NAME:"data-name",ATTR_CAR_ID:"data-id",ATTR_CAR_COLOR:"data-color",MOOVE:"moove",WINNER:"winner",FINISHER:"finisher",FINISHERS:"finishers"},t.constantsSVGs={FINISH_FLAG_SVG:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 106 106"><defs><style>.cls-1{fill:#fff;}.cls-2{opacity:0.1;}.cls-3{fill:#171c1f;}</style></defs><title>checkered-flag</title><g id="Checkered-Flag"><g id="Fill"><path class="cls-1" d="M58.62,5.1C43.5,8.92,26.5,16.5,9,5.29V65.12c17.5,11.21,34.5,3.63,49.62-.19C73.75,60.48,87,59.79,97,70.1V10.27C87,0,73.75.65,58.62,5.1Z"/></g><g id="Shadows" class="cls-2"><path d="M76.63,57.86c-5.34,0-11.24,1-18.5,3.15-2.23.56-4.45,1.19-6.79,1.86C44.15,64.9,36.7,67,29.12,67A34.21,34.21,0,0,1,11,62v2a34.21,34.21,0,0,0,18.12,5c7.58,0,15-2.11,22.22-4.15,2.34-.66,4.55-1.29,6.79-1.85,7.26-2.14,13.16-3.15,18.5-3.15,7.21,0,13.26,1.91,18.37,5.8v-2C89.89,59.76,83.84,57.86,76.63,57.86Z"/></g><g id="Outline"><path class="cls-3" d="M98.44,8.87C92.66,2.9,85.52,0,76.63,0,71.29,0,65.39,1,58.13,3.14,55.9,3.71,53.58,4.36,51.35,5,44.15,7,36.7,9.15,29.12,9.15A34.21,34.21,0,0,1,11,4.13V2A2,2,0,0,0,7,2V104a2,2,0,0,0,4,0V68.58A38,38,0,0,0,29.12,73C37.26,73,45,70.81,52.44,68.7c2.31-.66,4.5-1.28,6.75-1.85a62.8,62.8,0,0,1,17.44-3c7.75,0,13.94,2.5,18.93,7.65A2,2,0,0,0,99,70.11V10.25A2,2,0,0,0,98.44,8.87ZM95,65.66c-5.11-3.9-11.16-5.8-18.37-5.8-5.34,0-11.24,1-18.5,3.15-2.23.56-4.45,1.19-6.79,1.85C44.15,66.9,36.7,69,29.12,69A34.21,34.21,0,0,1,11,64V8.74a38,38,0,0,0,18.12,4.4C37.26,13.14,45,11,52.44,8.84c2.31-.66,4.5-1.28,6.75-1.85A62.81,62.81,0,0,1,76.63,4C84.09,4,90.11,6.31,95,11.08Z"/></g><g id="Black"><path class="cls-3" d="M53,7.61c-4.67,1.32-9.33,2.65-14,3.53V26.33c4.67-.88,9.33-2.21,14-3.53Zm-42,0V22.8a34.47,34.47,0,0,0,14,4.42V12A34.47,34.47,0,0,1,11,7.61ZM95,66.38V51.19a34.47,34.47,0,0,0-14-4.42V62A34.47,34.47,0,0,1,95,66.38ZM95,37V22.8a34.47,34.47,0,0,0-14-4.42V32.58A34.47,34.47,0,0,1,95,37ZM11,37V51.19a34.47,34.47,0,0,0,14,4.42V41.41A34.47,34.47,0,0,1,11,37ZM53,65.38c4.67-1.32,9.33-2.65,14-3.53V47.66c-4.67.88-9.33,2.21-14,3.53ZM39,40.53V54.72c4.67-.88,9.33-2.21,14-3.53V37C48.33,38.32,43.67,39.65,39,40.53ZM25,55.61V70.77l1.16.11a51.34,51.34,0,0,0,12.84-1V54.72A49.86,49.86,0,0,1,25,55.61ZM81,18.39V3.19a49.86,49.86,0,0,0-14,.88V19.27A49.86,49.86,0,0,1,81,18.39ZM67,33.46V47.66a49.85,49.85,0,0,1,14-.88V32.58A49.85,49.85,0,0,0,67,33.46ZM39,40.53V26.33a49.86,49.86,0,0,1-14,.88V41.41A49.85,49.85,0,0,0,39,40.53Zm28-7.07V19.27c-4.67.88-9.33,2.21-14,3.53V37C57.67,35.67,62.33,34.35,67,33.46Z"/></g></g></svg>',GIT_SVG:'\n  <svg\n    aria-hidden="true"\n    viewBox="0 0 16 16"\n    version="1.1"\n    data-view-component="true"\n    class="git-ref__img"\n  >\n  <path\n    d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"\n  ></path>\n</svg>\n  '},t.carNames=["Royce","Bentley","Jaguar","Land Rover","Lagonda","McLaren","Lotus","Mini","MG","Morgan","Ferrari","Alfa","Maserati","Mercedes","Ford","Porsche","Lotus","Renault","Lamborghini","Peugeot","Aston","9ff","Apollo","Arash","Arrinera","Artega","Ascari","Audi"]},148:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomName=t.getRandomColor=t.freeIdSearche=t.getRandomIntBetween=t.delay=t.isFormValidate=t.getImage=t.generateDomElement=void 0;const i=a(379);t.generateDomElement=(e,t,a,...i)=>{const n=document.createElement(e),s=[];return i.forEach((e=>{Array.isArray(e)?e.forEach((e=>s.push(e))):e&&e.split(" ").forEach((e=>s.push(e)))})),s.length&&n.classList.add(...s),t&&(n.innerHTML=t),a&&a.append(n),n},t.getImage=e=>`\n  <svg\n      class="svg-car"\n      xmlns="http://www.w3.org/2000/svg"\n      xml:space="preserve"\n      version="1.1"\n      viewBox="0 4200 8500 2600"\n      xmlns:xlink="http://www.w3.org/1999/xlink"\n    >\n      <path\n        class="fil0 str0"\n        d="M6952 4281l1534 -75c26,91 15,189 -30,272 23,260 -93,513 -306,664 51,46 77,114 69,183l-34 302c0,60 -37,115 -94,137 -33,69 -28,151 16,214l-898 258 0 -3c-48,-139 -131,-264 -240,-363 -3,-1 -6,-1 -8,0 -3,2 -5,4 -5,7 56,287 -54,580 -285,760 -84,68 -184,114 -291,134 -225,37 -456,-16 -642,-149l-1315 62c-41,50 -103,79 -168,81 -65,1 -127,-26 -171,-74 -42,50 -103,79 -168,81 -65,1 -128,-26 -171,-74 -42,50 -103,79 -168,81 -65,1 -128,-26 -172,-74 -42,51 -105,80 -171,80 -66,1 -129,-28 -172,-78l-1381 58c-14,7 -30,7 -44,1 -14,-6 -25,-18 -30,-33l-48 -134c-2,-7 -7,-11 -13,-13 -6,-1 -13,1 -17,6 -104,158 -294,233 -479,191 -185,-42 -324,-195 -349,-383 -91,92 -110,233 -47,346l-624 -2c-7,-2 -13,-8 -16,-15 -2,-8 -1,-16 3,-22 45,-43 51,-112 16,-162l-33 -49c39,-79 88,-152 145,-219 90,-93 195,-170 311,-227 113,-53 231,-95 351,-126l1781 -434c47,-128 163,-217 299,-230l100 -10 -3 -41 -102 9 0 -331c27,-23 60,-38 96,-42 124,-9 247,32 341,113l157 122c105,8 207,47 291,112l39 -1c205,-132 425,-239 654,-321 365,-125 749,-178 1134,-159 140,3 280,20 418,50 222,53 429,159 601,309l339 -789z"\n      />\n      <path\n        style="fill: ${e}"\n        class="fil1 str1"\n        d="M8370 4284c19,0 34,16 34,35 0,19 -15,35 -34,35 -19,0 -35,-16 -35,-35 0,-19 16,-35 35,-35zm-44 119c19,0 34,16 34,35 0,19 -15,34 -34,34 -19,0 -35,-15 -35,-34 0,-19 16,-35 35,-35zm-50 115c19,0 34,16 34,35 0,19 -15,34 -34,34 -19,0 -35,-15 -35,-34 0,-19 16,-35 35,-35zm-54 107c19,0 35,16 35,35 0,19 -16,34 -35,34 -19,0 -34,-15 -34,-34 0,-19 15,-35 34,-35zm-1484 629l1144 -104 2 30 -1143 104 -3 -30zm-918 -447c241,37 467,139 655,295 5,7 7,16 5,24 -3,8 -9,15 -17,17l-201 49c-52,19 -110,3 -146,-38l-308 -326c-3,-4 -3,-10 -1,-15 3,-4 8,-7 13,-6zm-180 131c62,90 82,203 54,308 -509,73 -1022,117 -1537,131 -4,0 -8,-3 -10,-7 -2,-3 -1,-8 2,-12l445 -380c96,-67 205,-113 321,-134 171,-37 346,-55 522,-51 27,0 55,4 82,11 11,4 22,12 28,23l93 111zm-446 474c186,28 377,20 560,-25 11,-2 20,5 24,15 3,10 -1,21 -10,27 -203,57 -413,81 -624,69 -74,-7 -149,-1 -221,17 -47,9 -84,47 -89,95 -6,47 21,93 65,111 80,15 162,13 242,-4 185,-36 366,-91 540,-163 206,-108 432,-174 664,-194 8,1 14,7 15,15 2,8 -3,16 -10,19 -201,32 -394,106 -564,218 -126,85 -266,147 -414,183 -218,69 -449,91 -676,63 -246,-48 -496,-78 -746,-89 -82,-5 -165,6 -243,33 -33,8 -58,36 -61,70 -3,33 16,65 47,78 51,4 103,1 153,-11l4 9c-147,87 -318,119 -487,93 -281,-60 -574,-38 -844,63 -241,94 -502,129 -760,101 -9,-1 -15,-8 -16,-17 -1,-9 5,-18 14,-20 243,-20 480,-86 699,-194 219,-108 461,-159 705,-151 271,-11 536,-84 773,-214 106,-69 236,-88 357,-52l-1 4c-32,-1 -64,4 -95,15 -24,7 -42,29 -43,54 0,25 16,48 40,55 46,6 92,-1 134,-20 96,-61 195,-114 299,-159 178,-82 374,-115 569,-94zm-3309 936l3656 -334c14,-1 27,9 30,23 2,14 -11,28 -25,32l-3656 334c-14,1 -26,-9 -27,-23 -2,-7 0,-15 4,-21 4,-6 11,-10 18,-11zm1871 -15c54,-13 111,8 143,54 14,20 12,47 -5,65 -9,6 -17,12 -24,19l-222 212c-8,9 -22,11 -32,4 -10,-7 -13,-21 -8,-32l179 -171c4,-4 6,-11 4,-17 -2,-6 -7,-11 -13,-11 -28,-12 -49,-34 -59,-62 -7,-24 5,-48 27,-57l10 -4zm-226 152l-221 212c-9,9 -22,11 -32,4 -10,-7 -13,-22 -8,-33l178 -170c5,-4 7,-11 5,-17 -2,-6 -7,-11 -13,-12 -28,-11 -49,-33 -60,-61 -6,-24 6,-48 28,-57l9 -4c55,-13 111,8 143,54 15,20 13,47 -5,64 -8,7 -16,13 -24,20zm904 -162c55,-13 111,9 143,54 15,20 13,47 -5,65 -8,6 -16,12 -24,19l-221 212c-9,9 -22,11 -32,4 -10,-7 -13,-21 -8,-32l178 -171c5,-4 7,-11 5,-17 -2,-6 -7,-10 -13,-11 -28,-12 -49,-34 -60,-62 -6,-23 6,-48 28,-57l9 -4zm-215 138l-222 212c-8,9 -22,11 -32,4 -10,-7 -13,-21 -8,-32l179 -171c4,-4 6,-11 4,-17 -1,-6 -6,-10 -13,-11 -27,-12 -49,-34 -59,-62 -7,-23 5,-48 28,-57l9 -4c54,-13 111,9 143,54 15,20 12,47 -5,65 -8,6 -17,12 -24,19zm229 -1523c4,-1 8,1 10,4 2,3 2,8 0,11l-488 369c-50,48 -117,74 -186,73 -30,-3 -58,-11 -84,-25 228,-178 480,-323 748,-432zm2553 466c252,36 508,-3 737,-112 12,-4 25,1 31,12 5,11 -2,26 -13,33 -183,117 -394,183 -611,191 -47,1 -93,-5 -139,-16 -194,-41 -395,-40 -588,5 -11,-1 -21,-8 -24,-19 -3,-11 1,-23 11,-29 188,-78 395,-100 596,-65zm-518 442c60,74 83,171 62,263 -1,5 -5,9 -9,11 -5,2 -10,3 -15,1l-126 -65c-12,-10 -19,-25 -19,-41 -5,-17 -9,-34 -15,-50 0,-9 2,-17 6,-25l69 -102c7,-6 16,-9 25,-7 10,2 18,7 22,15zm-110 283l119 33c7,5 13,13 14,22 2,10 -1,19 -8,26 -51,80 -135,132 -230,141 -5,0 -10,-2 -13,-5 -4,-4 -6,-9 -6,-14l23 -140c6,-15 18,-26 33,-31 14,-10 29,-20 43,-30 8,-3 16,-4 25,-2zm-389 41l137 -36c13,-5 27,-2 37,8 19,8 32,25 36,45l-7 140c-1,10 -9,17 -18,18 -83,-18 -154,-69 -197,-143 -4,-5 -5,-12 -3,-19 3,-6 8,-11 15,-13zm-158 -98c122,-275 403,-445 704,-425 6,4 9,11 8,18 -1,7 -6,13 -13,15 -86,-1 -173,14 -254,43 -3,1 -6,4 -6,7 0,3 2,6 5,7 43,5 85,19 123,41 4,3 7,8 7,13 1,5 0,10 -3,14l-101 99c-9,6 -19,8 -29,8 -16,-3 -33,-4 -50,-4 -15,3 -30,-2 -40,-13l-66 -85 -2 -2 -3 -1c-15,7 -29,16 -41,27 -3,2 -4,6 -2,9l60 104c3,10 3,20 1,30 -7,15 -13,31 -16,47 -1,15 -10,29 -23,36l-113 49c-14,2 -28,-6 -34,-19 -6,-37 -5,-75 3,-111 1,-3 0,-7 -3,-9 -2,-2 -5,-2 -8,-1 -29,36 -54,74 -74,115 -4,6 -12,8 -19,6 -8,-3 -12,-10 -11,-18zm-5493 179c295,-258 698,-357 1079,-265 210,46 425,60 638,42 10,1 17,8 18,17 1,10 -5,19 -14,22 -199,41 -404,42 -603,4 -379,-89 -777,-16 -1101,199 -6,3 -12,1 -16,-3 -3,-4 -4,-11 -1,-16zm1840 -520c152,-65 321,-81 483,-46 121,24 247,23 368,-1 10,-1 19,6 22,15 2,10 -3,20 -12,24 -149,47 -307,61 -462,41 -131,-21 -265,-2 -384,56 -129,61 -269,96 -412,103 -4,-2 -7,-5 -8,-10 -1,-5 1,-9 5,-12 140,-40 274,-97 400,-170zm-1104 526c-15,19 -24,42 -26,66 2,8 -3,17 -10,20l-146 51c-5,2 -10,2 -15,0 -5,-2 -9,-6 -11,-11 -9,-52 -4,-105 13,-154 4,-13 11,-25 22,-34 33,-18 69,-31 106,-38 10,-2 20,2 27,10l39 60c6,9 6,20 1,30zm404 126c-3,6 -11,9 -18,7l-134 -55c-7,-4 -12,-10 -15,-17 -2,-17 -8,-33 -16,-48 -4,-6 -3,-15 3,-20l37 -28c5,-3 12,-3 18,-1 45,29 84,67 116,110 10,10 14,24 11,38l-2 14zm-244 -179c-4,5 -10,7 -15,4 -18,-5 -37,-7 -56,-5 -8,3 -16,1 -22,-5l-17 -36c-1,-6 2,-11 7,-14 36,1 72,7 106,19 3,0 6,2 7,5 1,2 2,5 1,8l-11 24zm544 361l429 -14c10,-1 19,3 26,9 7,7 11,16 11,25l1 18c0,10 -3,19 -10,26 -6,7 -15,11 -25,11l-429 14c-22,1 -40,-16 -40,-38 -4,-12 -1,-25 6,-35 7,-9 19,-16 31,-16zm-345 -63c-51,79 -136,131 -230,141 -5,0 -10,-2 -13,-6 -4,-4 -6,-8 -6,-13l22 -140c6,-15 19,-26 33,-32 15,-9 29,-19 43,-29 8,-3 17,-4 25,-3l119 34c8,5 13,13 15,22 1,9 -2,19 -8,26zm-517 -42l137 -37c13,-4 28,-1 38,8 18,9 32,25 35,46l-6 140c-1,9 -9,17 -19,18 -82,-18 -154,-70 -196,-143 -4,-6 -5,-13 -3,-19 2,-7 8,-12 14,-13z"\n      />\n    </svg>\n  `,t.isFormValidate=e=>!!e,t.delay=(e=1e3)=>new Promise((t=>{setTimeout(t,e)})),t.getRandomIntBetween=(e=1,t=10)=>{const a=Math.ceil(e);return Math.floor(Math.random()*(Math.floor(t)-a+1))+a},t.freeIdSearche=e=>e.length?Math.max(...e.map((e=>e.id)))+1:0,t.getRandomColor=()=>`#${Math.floor(16777215*Math.random()).toString(16).padStart(6,"0")}`,t.getRandomName=()=>`${i.carNames[(0,t.getRandomIntBetween)(0,i.carNames.length-1)]} ${(()=>{const e=[..."asdfghjklqwertyuiopzxcvbnm"].map(((e,t)=>`${e}${t}`));return e[(0,t.getRandomIntBetween)(0,e.length-1)]})()}`},91:function(e,t,a){var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Crud=void 0;const n=a(379);t.Crud=class{constructor(e,t="GET",a,i={"Content-Type":"application/json"}){this.url=e,this.apiMethod=t,this.body=a,this.headers=i,this.responseJson=this.load(this.url,this.apiMethod,this.body,this.headers)}load(e,t="GET",a,s={"Content-Type":"application/json"}){return i(this,void 0,void 0,(function*(){try{const i=yield fetch(n.API_BASE_URL+e,{method:t,headers:s,body:a?JSON.stringify(a):null});return yield this.loadResponseHandler(i),yield i.json()}catch(e){return console.error(e),null}}))}loadResponseHandler(e){return i(this,void 0,void 0,(function*(){e.ok||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`)}))}}},574:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.Listners=void 0;const i=a(379),n=a(106),s=a(992),{GARAGE:r,WIN_PAGE:o,BTN_TRACK_SELECT_CAR_STYLE:l,BTN_TRACK_REMOVE_CAR_STYLE:c,BTN_STOP_RACE:h,BTN_START_RACE:d,BTN_CREATE_CARS:T,BTN_PAGIN_FIRST:_,BTN_PAGIN_LAST:u,BTN_PAGIN_LEFT:m,BTN_PAGIN_RIGHT:g,NEXT_PAGE_BTN:C,PREV_PAGE_BTN:A,WIN_TBL_WINS_SORT:p,WIN_TBL_TIME_SORT:E}=i.constantsClasses;t.Listners=class{constructor(){this.garage=new n.Garage,this.winPage=new s.Winners}startEventListners(){document.addEventListener("click",this.documentClickHandler.bind(this))}documentClickHandler(e){const t=e.target;t.closest(`.${l}`)?this.garage.updateCarForm(t):t.closest(`.${c}`)?this.garage.removeCarHandler(t):t.closest(`.${h}`)?this.garage.stopRace():t.closest(`.${d}`)?this.garage.startRace():t.closest(`.${T}`)?this.garage.createCars():t.closest(`.${r} .${_}`)?this.garage.paginClickHandler("first"):t.closest(`.${r} .${u}`)?this.garage.paginClickHandler("last"):t.closest(`.${r} .${m}`)?this.garage.paginClickHandler("previus"):t.closest(`.${r} .${g}`)?this.garage.paginClickHandler("next"):t.closest(`.${o} .${_}`)?this.winPage.paginClickHandler("first"):t.closest(`.${o} .${u}`)?this.winPage.paginClickHandler("last"):t.closest(`.${o} .${m}`)?this.winPage.paginClickHandler("previus"):t.closest(`.${o} .${g}`)?this.winPage.paginClickHandler("next"):t.closest(`.${p}`)?this.winPage.tblSortWinsHandler():t.closest(`.${E}`)?this.winPage.tblSortTimeHandler():t.closest(`.${C}`)?this.showNextPage():t.closest(`.${A}`)&&this.showPreviusPage(),this.winTagHandler(t)}winTagHandler(e){[`.${h}`,`.${d}`,`.${T}`,`.${r} .${_}`,`.${r} .${u}`,`.${r} .${m}`,`.${r} .${g}`,`.${o} .${u}`,`.${o} .${m}`,`.${o} .${g}`,`.${p}`,`.${E}`,`.${C}`,`.${A}`].forEach((t=>{e.closest(t)&&this.hideWinTag()}))}hideWinTag(){}showNextPage(){}showPreviusPage(){}}},131:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.Pagination=void 0;const i=a(379),n=a(148),{PAGIN_WRAPPER:s,BTN_PAGIN_LEFT:r,BTN_PAGIN_RIGHT:o,BTN_PAGIN_LAST:l,BTN_PAGIN_FIRST:c,PAGIN_CURRENT:h,HIDE_PAGINATION:d}=i.constantsClasses,{BTN_PAGIN_TEXT_LEFT:T,BTN_PAGIN_TEXT_RIGHT:_,BTN_PAGIN_TEXT_LAST:u,BTN_PAGIN_TEXT_FIRST:m}=i.constantsTexts;t.Pagination=class{constructor(){this.maxPage=1,this.currPageNum=1,this.mainArray=[]}makePagination(){this.paginWrapper=(0,n.generateDomElement)("div",null,this.layout,s,d),this.btnPaginFirst=(0,n.generateDomElement)("button",m,this.paginWrapper,c),this.btnPaginPrevius=(0,n.generateDomElement)("button",T,this.paginWrapper,r),this.paginCurrPage=(0,n.generateDomElement)("div",`${this.currPageNum}`,this.paginWrapper,h),this.btnPaginNext=(0,n.generateDomElement)("button",_,this.paginWrapper,o),this.btnPaginLast=(0,n.generateDomElement)("button",u,this.paginWrapper,l)}updatePagination(){this.isPaginationVisible()&&(this.maxPage=Math.ceil(this.mainArray.length/this.rowsPerPage),this.currPageNum=Math.min(Math.max(1,this.currPageNum),this.maxPage),this.paginCurrPage.innerHTML=`${this.currPageNum}`,this.setDisablingPaginBtns()),this.fillPage(this.currPageNum)}paginClickHandler(e){"first"===e?this.currPageNum=1:"previus"===e?this.currPageNum-=1:"next"===e?this.currPageNum+=1:"last"===e&&(this.currPageNum=this.maxPage),this.updatePagination()}fillPage(e=1){console.log(e)}isTableOverFull(){return this.mainArray.length>this.rowsPerPage}isPaginationVisible(){return!this.isTableOverFull()&&this.currPageNum<=1?(this.paginWrapper.classList.add(d),!1):(this.paginWrapper.classList.remove(d),!0)}setDisablingPaginBtns(){this.btnPaginNext.disabled=!1,this.btnPaginLast.disabled=!1,this.btnPaginPrevius.disabled=!1,this.btnPaginFirst.disabled=!1,this.currPageNum>=this.maxPage&&(this.btnPaginNext.disabled=!0,this.btnPaginLast.disabled=!0),this.currPageNum<=1&&(this.btnPaginPrevius.disabled=!0,this.btnPaginFirst.disabled=!0)}}},395:function(e,t){var a=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Resp=t.API_BASE_URL=void 0,t.API_BASE_URL="http://127.0.0.1:3000",t.Resp=class{constructor(e,t="GET",a,i={"Content-Type":"application/json"}){this.url=e,this.apiMethod=t,this.body=a,this.headers=i,this.response=this.carCRUD(this.url,this.apiMethod,this.body,this.headers)}carCRUD(e,i="GET",n,s={"Content-Type":"application/json"}){return a(this,void 0,void 0,(function*(){try{return yield fetch(t.API_BASE_URL+e,{method:i,headers:s,body:n?JSON.stringify(n):null})}catch(e){return console.error(e),null}}))}}},17:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0,t.Car=class{constructor(e,t="#000000",a=""){this.id=e,this.color=t,this.name=a}}},106:function(e,t,a){var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const n=a(379),s=a(91),r=a(148),o=a(17),l=a(131),{INSTALL_SERVER:c,GARAGE:h,TRACKS_TAG:d,CONTROL_PANEL:T,INP_CREATE_CAR_NAME:_,INP_CREATE_CAR_COLOR:u,INP_UPDATE_CAR_NAME:m,INP_UPDATE_CAR_COLOR:g,WRAP_RACE_BUTTONS:C,BTN_STOP_RACE:A,BTN_START_RACE:p,BTN_CREATE_CARS:E,CREATE_CAR_SUBMIT_CLASS:R,UPDATE_CAR_SUBMIT_CLASS:N,NEXT_PAGE_BTN:P,IS_RACING:S}=n.constantsClasses,{ATTENTION_INSTALL_SERVER:b,GARAGE_TITLE:I,CREATE_CAR_SUBMIT:v,UPDATE_CAR_SUBMIT:f,DEFAULT_UPDATE_COLOR:L,DEFAULT_CREATE_COLOR:y,BTN_STOP_RACE_TEXT:B,BTN_START_RACE_TEXT:w,BTN_CREATE_CARS_TEXT:G}=n.constantsTexts,{ATTR_CAR_NAME:W,ATTR_CAR_ID:M,ATTR_CAR_COLOR:U,MOOVE:O,FINISHERS:D}=n.constantsAttributes,{TRACK_TAG:F,WIN_TAG:k}=n.constantsTagName,{API_LINK:H}=n.constantsLinks,{NUMBER_RANDOM_CREATED_CAR:$,NUMBER_TRACKS_PER_PAGE:x}=n.constantsNumbers,{getCars:V,createCar:K,deleteCar:z,updateCar:j}=n.apiGarage,{deleteWinner:X}=n.apiWinner;class q extends l.Pagination{constructor(){super(),this.rowsPerPage=x,this.isRace=!1,this.garageBuild()}garageBuild(){return i(this,void 0,void 0,(function*(){this.generateGarage(),this.generateControlPanel(),this.generateGarageTitle(),this.generateTracksTag(),yield this.getCars(),this.makePagination(),this.bindCallbacks(),this.startEventListners(),this.updateGarageTitle()}))}getCars(){return i(this,void 0,void 0,(function*(){const e=new s.Crud(this.makeRequestUrlCarEdit()),t=yield e.responseJson;t&&(this.mainArray=t.map((e=>new o.Car(e.id,e.color,e.name)))),this.mainArray.length||this.checkEmptyGarage()}))}checkEmptyGarage(){if(this.mainArray.length)this.apiLink&&this.apiLink.remove();else{if(this.apiLink)return;this.apiLink=(0,r.generateDomElement)("a",b,this.layout,c),this.apiLink.href=H,this.apiLink.target="_blank"}}disableUpdateForm(e=!0){this.inputUpdateCarColor.value=L,this.inputUpdateCarName.value="",this.inputUpdateCarName.disabled=e,this.inputUpdateCarColor.disabled=e,this.inputUpdateCarSubmit.disabled=e}disableCreateForm(e=!0){this.inputCreateCarColor.value=y,this.inputCreateCarName.value="",this.inputCreateCarName.disabled=e,this.inputCreateCarColor.disabled=e,this.inputCreateCarSubmit.disabled=e}fillPage(e=1){this.checkEmptyGarage(),this.tracksElement.innerHTML="",this.mainArray.slice((e-1)*x,e*x).forEach((e=>{const t=(0,r.generateDomElement)(F,null,this.tracksElement);this.setTrackAttributes(t,e.id,e.name,e.color),t.insertCar(e)}))}bindCallbacks(){this.updateCarSubmitHandler=this.updateCarSubmitHandler.bind(this),this.createCarFormSubmitHandler=this.createCarFormSubmitHandler.bind(this)}startEventListners(){this.formCreateCar.addEventListener("submit",this.createCarFormSubmitHandler),this.formCreateCar.addEventListener("focus",this.disableUpdateForm.bind(this,!0),!0)}updateCarForm(e){const t=e.closest(F);if(!t)return;const a=this.mainArray.find((e=>e.id===t.car.id));a&&(this.disableUpdateForm(!1),this.inputUpdateCarName.focus(),this.inputUpdateCarName.value=a.name||"",this.inputUpdateCarColor.value=a.color||y,this.chosenTrack=t,this.chosenCar=a,this.formUpdateCar.addEventListener("submit",this.updateCarSubmitHandler,{once:!0}))}updateCarSubmitHandler(e){if(e.preventDefault(),!(0,r.isFormValidate)(this.inputUpdateCarName.value))return this.formUpdateCar.addEventListener("submit",this.updateCarSubmitHandler,{once:!0}),void this.inputUpdateCarName.focus();this.updateCar(),this.disableUpdateForm(!0)}stopRace(){this.isRace=!1;const e=this.getTrackTags();e.length&&e.forEach((e=>e.removeAttribute(O)))}startRace(){this.disableBtns(),this.resetFinishersCounter(),this.isRace=!0;const e=this.getTrackTags();e.length&&e.forEach((e=>{console.log("moove"),e.setAttribute(O,"")}))}disableBtns(){const e=document.body.querySelector(`.${P}`);e&&(e.disabled=!0),this.startRaceBtn.disabled=!0,this.resetRaceBtn.disabled=!0,this.createCarsBtn.disabled=!0,this.paginWrapper.classList.add(S),this.disableCreateForm(),this.disableUpdateForm()}resetFinishersCounter(){const e=document.body.querySelector(k);e&&e.setAttribute(D,"0")}createCarFormSubmitHandler(e){e.preventDefault(),(0,r.isFormValidate)(this.inputCreateCarName.value)?(this.createCar({name:this.inputCreateCarName.value,color:this.inputCreateCarColor.value}),this.resetCreateForm()):this.inputCreateCarName.focus()}removeCarHandler(e){return i(this,void 0,void 0,(function*(){const t=e.closest(F);t&&(yield this.removeCar(t),this.disableUpdateForm(),this.updateGarageTitle())}))}resetCreateForm(){this.inputCreateCarColor.value=y,this.inputCreateCarName.value=""}createCars(){for(let e=0;e<$;e+=1)this.createCar({name:(0,r.getRandomName)(),color:(0,r.getRandomColor)()})}createCar(e){return i(this,void 0,void 0,(function*(){const t=new s.Crud(this.makeRequestUrlCarEdit(),K.method,e),a=yield t.responseJson;a&&(this.mainArray.push(a),this.updateGarageTitle())}))}updateCar(){return i(this,void 0,void 0,(function*(){const{chosenCar:e}=this,t=new s.Crud(this.makeRequestUrlCarEdit(e.id),j.method,{name:this.inputUpdateCarName.value,color:this.inputUpdateCarColor.value}),a=yield t.responseJson;a&&(e.name=a.name,e.color=a.color,this.setTrackAttributes(this.chosenTrack,e.id,e.name,e.color))}))}removeCar(e){return i(this,void 0,void 0,(function*(){const{id:t}=e.car,a=this.mainArray.findIndex((e=>e.id===t));if(void 0===a||-1===a)return;const i=new s.Crud(this.makeRequestUrlCarEdit(t),z.method),n=new s.Crud(`${X.deleteUrl+t}`,X.method);i.responseJson&&(yield n.responseJson)&&(this.mainArray.splice(a,1),console.log("Deleted"))}))}makeRequestUrlCarEdit(e){const t=void 0!==e?`/${e}`:"";return`${V.getCarsUrl+t}`}setTrackAttributes(e,t,a,i){e.setAttribute(M,`${t}`),e.setAttribute(W,`${a}`),e.setAttribute(U,`${i}`)}generateGarage(){this.layout=(0,r.generateDomElement)("div","",null,h)}generateControlPanel(){this.controlPanel=(0,r.generateDomElement)("div",null,this.layout,T),this.generateFormCreateCar(),this.generateFormUpdateCar(),this.generateFormRace()}generateTracksTag(){this.tracksElement=(0,r.generateDomElement)("div","",this.layout,d)}generateFormRace(){const e=(0,r.generateDomElement)("div",null,this.controlPanel,C);this.resetRaceBtn=(0,r.generateDomElement)("button",B,e,A),this.startRaceBtn=(0,r.generateDomElement)("button",w,e,p),this.createCarsBtn=(0,r.generateDomElement)("button",G,e,E)}generateFormCreateCar(){this.formCreateCar=(0,r.generateDomElement)("form","",this.controlPanel),this.inputCreateCarName=(0,r.generateDomElement)("input","",this.formCreateCar,_),this.inputCreateCarName.type="text",this.inputCreateCarColor=(0,r.generateDomElement)("input","",this.formCreateCar,u),this.inputCreateCarColor.type="color",this.inputCreateCarSubmit=(0,r.generateDomElement)("button",v,this.formCreateCar,R),this.inputCreateCarSubmit.type="submit",this.resetCreateForm()}generateFormUpdateCar(){this.formUpdateCar=(0,r.generateDomElement)("form","",this.controlPanel),this.inputUpdateCarName=(0,r.generateDomElement)("input","",this.formUpdateCar,m),this.inputUpdateCarName.type="text",this.inputUpdateCarColor=(0,r.generateDomElement)("input","",this.formUpdateCar,g),this.inputUpdateCarColor.type="color",this.inputUpdateCarSubmit=(0,r.generateDomElement)("button",f,this.formUpdateCar,N),this.inputUpdateCarSubmit.type="submit",this.disableUpdateForm(!0)}generateGarageTitle(){this.garageTitle=(0,r.generateDomElement)("h2",null,this.layout)}updateGarageTitle(){this.garageTitle.textContent=`${I} (${this.mainArray.length})`,this.updatePagination()}getTrackTags(){return[...document.querySelectorAll(F)]}}t.Garage=q},412:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;const i=a(379),n=a(148),s=a(574),{WIN_TAG:r}=i.constantsTagName,{HEADER:o,SWU_IMG:l,MAIN:c,FOOTER:h,RSS_LINK_CLASS:d,RSS_LINK_IMG:T,COPYRIGHT:_,WIN_SHOW:u,SWITCH_PAGE_BTN_WRAP:m,NEXT_PAGE_BTN:g,PREV_PAGE_BTN:C,GARAGE_HIDE:A}=i.constantsClasses,{H1:p,SWU_IMG_ALT:E,RSS_IMG_ALT:R,COPYRIGHT_TEXT:N,NEXT_PAGE:P,PREV_PAGE:S}=i.constantsTexts,{SWU_IMG_PATH:b,GIT_LINK:I,RSS_LINK:v,RSS_IMG_PATH:f}=i.constantsLinks,{GIT_SVG:L}=i.constantsSVGs;class y extends s.Listners{generateMainPageElements(){this.generateHeader(),this.generateMainTag(),this.generateFooter(),this.startEventListners()}generateHeader(){this.header=(0,n.generateDomElement)("header","",document.body,o),(0,n.generateDomElement)("h1",p,this.header);const e=(0,n.generateDomElement)("img","",this.header,l);e.setAttribute("alt",E),e.setAttribute("src",b);const t=(0,n.generateDomElement)("div",null,this.header,m);this.btnPreviusPage=(0,n.generateDomElement)("button",S,t,C),this.btnNextPage=(0,n.generateDomElement)("button",P,t,g)}generateMainTag(){this.main=(0,n.generateDomElement)("main","",document.body,c),this.winTag=(0,n.generateDomElement)(r,null,this.main),this.main.append(this.garage.layout),this.main.append(this.winPage.layout)}generateFooter(){this.footer=(0,n.generateDomElement)("footer","",document.body,h);const e=(0,n.generateDomElement)("a","",this.footer);e.href=I,e.target="_blank",e.innerHTML=L;const t=(0,n.generateDomElement)("a","",this.footer,d);t.setAttribute("target","_blank"),t.setAttribute("href",v);const a=(0,n.generateDomElement)("img","",t,T);a.setAttribute("alt",R),a.setAttribute("src",f);const i=(0,n.generateDomElement)("p","",this.footer,_);(0,n.generateDomElement)("span",N,i)}showNextPage(){this.winTag.classList.add(A),this.garage.layout.classList.add(A),this.winPage.pageUpdate(),this.winPage.layout.classList.add(u),this.btnNextPage.disabled=!0,this.btnPreviusPage.disabled=!1}showPreviusPage(){this.garage.layout.classList.remove(A),this.winPage.layout.classList.remove(u),this.winTag.classList.remove(A),this.btnNextPage.disabled=!1,this.btnPreviusPage.disabled=!0}hideWinTag(){this.winTag.innerHTML="",this.winTag.classList.remove(u)}}t.Page=y},15:function(e,t,a){var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Track=void 0;const n=a(379),s=a(91),r=a(395),o=a(148),{method:l,startStopUrl:c,required:{id:h,status:{statusUrl:d,params:{started:T,stopped:_,drive:u}}},stopCode:m}=n.apiCarEngine,{TRACK_BTNS_WRAPPER:g,TRACK_CAR_NAME:C,FINISH_FLAG:A,CAR:p,BTN_TRACK_SELECT_CAR_STYLE:E,BTN_TRACK_REMOVE_CAR_STYLE:R,BTN_TRACK_STOP_CAR_STYLE:N,BTN_TRACK_START_CAR_STYLE:P}=n.constantsClasses,{FINISH_FLAG_SVG:S}=n.constantsSVGs,{BTN_TRACK_SELECT_CAR:b,BTN_TRACK_REMOVE_CAR:I,BTN_TRACK_STOP_CAR:v,BTN_TRACK_START_CAR:f}=n.constantsTexts,{ATTR_CAR_NAME:L,ATTR_CAR_COLOR:y,MOOVE:B,WINNER:w,FINISHER:G,FINISHERS:W}=n.constantsAttributes,{WIN_TAG:M}=n.constantsTagName,{DISTANCE:U}=n.constantsNumbers;class O extends HTMLElement{constructor(){super(...arguments),this.winTag=document.body.querySelector(M),this.distance=U,this.start=0}static get observedAttributes(){return[L,y,B,w]}insertCar(e){this.car=e,this.carTitleTag.innerHTML=e.name,this.carElement=(0,o.generateDomElement)("div",(0,o.getImage)(this.car.color),this,p),(0,o.generateDomElement)("div",S,this,A)}attributeChangedCallback(e,t,a){e===L?(this.carTitle=a,this.carTitleTag&&(this.carTitleTag.innerHTML=a)):e===y?this.carElement&&(this.carElement.innerHTML=(0,o.getImage)(this.car.color)):e===B&&this.moove()}connectedCallback(){this.generateTrack(),this.callbackBinding(),this.setListners()}generateTrack(){const e=(0,o.generateDomElement)("div","",this,g);return(0,o.generateDomElement)("button",b,e,E),(0,o.generateDomElement)("button",I,e,R),this.engineStopBtn=(0,o.generateDomElement)("button",v,e,N),this.engineStopBtn.disabled=!0,this.engineStartBtn=(0,o.generateDomElement)("button",f,e,P),this.carTitleTag=(0,o.generateDomElement)("span",this.carTitle||null,e,C),this}callbackBinding(){this.step=this.step.bind(this)}setListners(){this.engineStopBtn.addEventListener("click",(()=>this.removeAttribute(B))),this.engineStartBtn.addEventListener("click",(()=>this.setAttribute(B,"")))}moove(){return i(this,void 0,void 0,(function*(){this.hasAttribute(B)?(this.moveCarToStart(),yield this.setAnimateParams(),requestAnimationFrame(this.step),(yield this.isCrashEngine(this.car.id,u))&&this.carStopped()):this.stopCar()}))}carStopped(){if(cancelAnimationFrame(this.stopId),!this.winTag)return;const e=this.winTag.getAttribute(W)||0;this.winTag.setAttribute(W,""+(+e+1))}moveCarToStart(){this.start=0,this.carElement.style.transform="translateX(0)"}stopCar(){return i(this,void 0,void 0,(function*(){yield this.isCrashEngine(this.car.id,_),this.carStopped(),this.moveCarToStart(),this.engineStartBtn.disabled=!1,this.engineStopBtn.disabled=!0}))}sendResultToWinTag(){this.carStopped(),this.winTag=document.body.querySelector(M),this.winTag&&this.winTag.setAttribute(G,[this.car.id,this.car.color,this.car.name,this.raceTime].join("|"))}setAnimateParams(){return i(this,void 0,void 0,(function*(){this.engineStartBtn.disabled=!0,this.engineStopBtn.disabled=!1,this.distance=this.clientWidth-this.carElement.clientWidth;const e=yield this.getApiVelocity(this.car.id,T);this.carVelocity=e.velocity||0,this.raceTime=this.getRaceTime()}))}step(e){(!this.start||this.progress>this.distance)&&(this.start=e),this.progress=(e-this.start)/this.raceTime,this.carElement.style.transform=`translateX(${Math.min(this.progress,this.distance)}px)`,this.progress<this.distance?this.stopId=requestAnimationFrame(this.step):this.sendResultToWinTag()}getRaceTime(){return this.carVelocity?+(this.distance/this.carVelocity).toFixed(2):0}isCrashEngine(e,t){return i(this,void 0,void 0,(function*(){const a=new r.Resp(this.makeRequestUrl(e,t),l),i=yield a.response;return(null==i?void 0:i.status)===m}))}getApiVelocity(e,t){return i(this,void 0,void 0,(function*(){const a=this.makeRequestUrl(e,t),i=new s.Crud(a,l);return(yield i.responseJson)||{velocity:null,distance:null}}))}makeRequestUrl(e,t){return`${c}?${h}${e}&${d+t}`}}t.Track=O},540:function(e,t,a){var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Winner=void 0;const n=a(379),s=a(91),{getWinner:r,createWinner:o,updateWinner:l}=n.apiWinner,{BTN_STOP_RACE:c,WIN_SHOW:h,BTN_START_RACE:d,BTN_CREATE_CARS:T,INP_CREATE_CAR_NAME:_,INP_CREATE_CAR_COLOR:u,CREATE_CAR_SUBMIT_CLASS:m,NEXT_PAGE_BTN:g,PAGIN_WRAPPER:C,IS_RACING:A}=n.constantsClasses,{TRACK_CAR_WINNER_TITLE:p}=n.constantsTexts,{FINISHER:E,FINISHERS:R}=n.constantsAttributes,{TRACK_TAG:N}=n.constantsTagName;class P extends HTMLElement{static get observedAttributes(){return[E,R]}attributeChangedCallback(e,t,a){e!==R?e!==E||this.classList.contains(h)||this.setWinner(a):+a>=document.body.querySelectorAll(N).length&&this.raceFinished()}raceFinished(){this.enableButtons()}enableButtons(){[d,c,T,_,u,m,g].forEach((e=>this.enableButton(e))),document.body.querySelector(`.${C}`).classList.remove(A)}enableButton(e){const t=document.body.querySelector(`.${e}`);t&&(t.disabled=!1)}setWinner(e){return i(this,void 0,void 0,(function*(){const[t,a,i,n]=e.split("|");this.oFinisher={id:+t,name:i,color:a,time:+n},this.textContent=`${p} - ${i} - (${n}s)`,this.classList.add(h),yield this.saveWinner()}))}saveWinner(){return i(this,void 0,void 0,(function*(){const{method:e}=r,t=`${r.getUrl+this.oFinisher.id}`,a=new s.Crud(t,e),i=yield a.responseJson;i&&void 0!==i.id?this.updateWinner(i):this.createWinner()}))}createWinner(){return i(this,void 0,void 0,(function*(){const{id:e,time:t}=this.oFinisher,{method:a,createUrl:i}=o;new s.Crud(i,a,{id:e,wins:1,time:t}).responseJson||console.log("!Can't create winner")}))}updateWinner(e){return i(this,void 0,void 0,(function*(){if(!e)return;const t=this.oFinisher.time<e.time?this.oFinisher.time:e.time,{id:a}=this.oFinisher,{method:i,updateUrl:n}=l,r=`${n+a}`;new s.Crud(r,i,{wins:e.wins+1,time:t}).responseJson||console.log("Wrong Update Winner")}))}}t.Winner=P},992:function(e,t,a){var i=this&&this.__awaiter||function(e,t,a,i){return new(a||(a=Promise))((function(n,s){function r(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0;const n=a(379),s=a(91),r=a(148),o=a(131),{getWinner:l}=n.apiWinner,{WIN_PAGE:c,WIN_TABLE:h,WIN_TBL_BODY:d,WIN_TBL_TITLE_ROW:T,WIN_TBL_ROW:_,WIN_TBL_WINS_SORT:u,WIN_TBL_TIME_SORT:m,ASC_SORT:g,ACTIVE:C}=n.constantsClasses,{WIN_PAGE_TITLE:A,WIN_TBL_TITLE_ROW_1:p,WIN_TBL_TITLE_ROW_2:E,WIN_TBL_TITLE_ROW_3:R,WIN_TBL_TITLE_ROW_4:N,WIN_TBL_TITLE_ROW_5:P}=n.constantsTexts,{NUMBER_ROWS_WIN_TABLE:S}=n.constantsNumbers,{getCars:b}=n.apiGarage;class I extends o.Pagination{constructor(){super(),this.rowsPerPage=S,this.pageBuild()}pageBuild(){return i(this,void 0,void 0,(function*(){this.generatePage(),this.generatePageTitle(),this.generateWinTable(),this.makePagination(),yield this.pageUpdate()}))}pageUpdate(){return i(this,void 0,void 0,(function*(){yield this.createWinnersArray(),this.fillPage(),this.updatePageTitle()}))}generatePage(){this.layout=(0,r.generateDomElement)("div","",null,c)}generateWinTable(){const e=(0,r.generateDomElement)("div","",this.layout,h),t=(0,r.generateDomElement)("div","",e,T);[p,E,R].forEach((e=>(0,r.generateDomElement)("div",e,t))),this.winTblBody=(0,r.generateDomElement)("div","",e,d),this.sortWinsBtn=(0,r.generateDomElement)("div",N,t,u),this.sortTimeBtn=(0,r.generateDomElement)("div",P,t,m)}tblSortTimeHandler(){this.sortTable(this.sortTimeBtn,"time"),this.sortWinsBtn.classList.remove(C)}tblSortWinsHandler(){this.sortTable(this.sortWinsBtn,"wins"),this.sortTimeBtn.classList.remove(C)}sortTable(e,t){e.classList.contains(g)?(this.mainArray=this.mainArray.sort(((e,a)=>e[t]>a[t]?1:-1)),e.classList.remove(g)):(this.mainArray=this.mainArray.sort(((e,a)=>e[t]>a[t]?-1:1)),e.classList.add(g)),e.classList.add(C),this.currPageNum=1,this.isTableOverFull()?this.updatePagination():this.fillPage()}generatePageTitle(){this.winPageTitle=(0,r.generateDomElement)("h2",null,this.layout)}updatePageTitle(){this.winPageTitle.textContent=`${A} (${this.mainArray.length})`,this.updatePagination()}fillPage(e=1){this.mainArray.length&&(this.winTblBody.innerHTML="",this.mainArray.slice((e-1)*S,e*S).forEach(((e,t)=>{const a=(0,r.generateDomElement)("div",null,this.winTblBody,_),{name:i,wins:n,time:s}=e;[(this.currPageNum-1)*S+t+1,(0,r.getImage)(e.color),i,n,s].forEach((e=>(0,r.generateDomElement)("div",`${e}`,a)))})))}createWinnersArray(){return i(this,void 0,void 0,(function*(){const e=new s.Crud(b.getCarsUrl,b.method),t=yield e.responseJson;if(!t)return;const a=new s.Crud(l.getUrl,l.method),i=yield a.responseJson;i&&(this.mainArray=i,this.mainArray.forEach((e=>{const a=t.find((t=>t.id===e.id));if(!a)return;const i=e;i.name=a.name,i.color=a.color})))}))}}t.Winners=I},364:function(e,t,a){e.exports=a.p+"assets/images/rs-school.png"},259:function(e,t,a){e.exports=a.p+"assets/images/ukraine_stand.png"}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,a),s.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&!e;)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){a(325);const e=a(962);a(364),a(259),(new e.App).runApplication()}()}();