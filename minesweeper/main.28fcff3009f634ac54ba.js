!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var s=i.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&!t;)t=s[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();const t={COUNTER_WRAPPER_CLASS:"info-section__counter-wrapper",COUNTER_TITLE_CLASS:"counter-wrapper__title",COUNTER_CLASS:"info-section__counter",CLICK_WRAPPER_CLASS:"info-section__click-wrapper",CLICK_TITLE_CLASS:"click-wrapper__title",CLICK_CLASS:"click-wrapper__clicks",CELL_ROW_TAG:"div",CELL_ROW_CLASS:"playground__row",CELL_TAG:"cell-div",END_GAME_TEXT_CLASS:"end-game-text",END_GAME_TEXT_WIN:"YOU WIN! :)",END_GAME_TEXT_LOSE:"YOU LOSE! :(",FONT_RATIO:.8,INFO_SECTION_CLASS:"info-section",LAST_WINS_KEY:"lastWins",LOCAL_DATA_KEY:"currentState",MAIN_TAG:"main",MAIN_CLASS:"main",PLAYGROUND_TAG:"section",PLAYGROUND_CLASS:"playground",SETTINGS_BTN_CLASS:"info-section__settings-btn",SETTINGS_BTN:"➠",START_BTN_CLASS:"start-btn",THEME_LIGHT:"theme-light",TIMER_CLASS:"info-section__timer",TIMER_MS_CLASS:"info-section__timer-ms",TIMER_SEC_CLASS:"info-section__timer-sec",TIMER_MIN_CLASS:"info-section__timer-min"},i={NAV_MENU:"nav-menu",MENU_OVERLAY:"menu-overlay",NAV_MENU_ACTIVE:"nav_active",NAV_MENU_WRAPPER:"nav-menu__wrapper",NAV_CLOSE_BTN:"✖",NAV_CLOSE_BTN_CLASS:"nav-menu__close-btn",MENU_TITLE:"nav-menu__title",MENU_TITLE_SCORE:"title_score",SLIDER_WRAPPER:"nav-slider-wrapper",WRAPPER_THEME:"wrapper_theme",WRAPPER_SOUND:"wrapper_sound",THEME_SLIDER:"theme-slider",SOUND_SLIDER:"sound-slider",MENU_LEVEL:"menu-level",LEVEL_ID_EASY:"level-easy",LEVEL_ID_MEDIUM:"level-medium",LEVEL_ID_HARD:"level-hard",LEVEL_ID_CUSTOM:"level-custom",CUSTOM_LEVEL_WRAP_CLASS:"level-custom-wrapper",CUSTOM_COLUMN_VAL:"custom-column-val",CUSTOM_ROW_VAL:"custom-row-val",CUSTOM_ROW_MAX:30,CUSTOM_ROW_MIN:5,CUSTOM_COLUMN_MAX:30,CUSTOM_COLUMN_MIN:5,CUSTOM_MINE_RATIO_MIN:.05,CUSTOM_MINE_RATIO_MAX:.5,CUSTOM_MINES_VAL:"custom-mines-val",CUSTOM_DONE_BTN:"custom-done-btn",CUSTOM_LEVEL_FORM:"custom-level-form"},{TIMER_MS_CLASS:s,TIMER_SEC_CLASS:n,TIMER_MIN_CLASS:l}=t,a={timer:0,timerInterval:0,startTimer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.stopTimer(),this.timer=e,this.timerInterval=setInterval((e=>this.setTimeValues(e)),1e3/60)},setTimeValues(){this.timer+=1/60;const e=Math.floor(100*(this.timer-Math.floor(this.timer))),t=Math.floor(this.timer)-60*Math.floor(this.timer/60),i=Math.floor(this.timer/60);document.querySelector(`.${s}`).innerHTML=e<10?`0${e.toString()}`:e,document.querySelector(`.${n}`).innerHTML=t<10?`0${t.toString()}`:t,document.querySelector(`.${l}`).innerHTML=i<10?`0${i.toString()}`:i},stopTimer(){this.timer=0,this.timerInterval=clearInterval(this.timerInterval)}};class o{constructor(e,t,i){this.rowNum=e,this.colNum=t,this.mineNum=i}}const h={easy:new o(10,10,10),medium:new o(15,15,40),hard:new o(25,25,99),custom:"",setParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;this.custom=new o(e,t,Math.max(1,i))}};class r extends HTMLElement{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.cellID=`${e}-${t}`,this.x=e,this.y=t,this.isOpened=i,this.VALUE=s}isMine=0;isFlag=!1;styles=[];cellIcon={EMPTY:"",BOOM:"💥",MINE:"💣",FLAG:"✔",BAD_FLAG:"❗",WIN:"🎁"};cellStyle={CELL:"cell",CLOSED:"cell-closed",OPENED:"cell-opened",FLAG:"cell-flag",WRONG_FLAG:"cell-flag_wrong",GOOD_FLAG:"cell-flag_good",MINE:"cell-mine",BOOM:"cell-mine_boom",WIN:"cell-win",MINES_AROUND:["cell_mines-around-0","cell_mines-around-1","cell_mines-around-2","cell_mines-around-3","cell_mines-around-4","cell_mines-around-5","cell_mines-around-6"]};connectedCallback(){this.generateClassList()}openCell(){this.isOpened=!0,this.textContent=this.VALUE||"",this.generateClassList()}showMine(){this.textContent=this.cellIcon.MINE}isCorrectFlag(e){e||(this.textContent=this.cellIcon.BAD_FLAG),this.classList.add(e?this.cellStyle.GOOD_FLAG:this.cellStyle.WRONG_FLAG),this.styles.push(e?this.cellStyle.GOOD_FLAG:this.cellStyle.WRONG_FLAG)}changeFlag(){this.isFlag=!this.isFlag,this.textContent=this.isFlag?this.cellIcon.FLAG:this.cellIcon.EMPTY}isBoom(){this.classList.add(this.cellStyle.BOOM),this.textContent=this.cellIcon.BOOM}isWin(){this.classList.add(this.cellStyle.WIN),this.textContent=this.cellIcon.WIN}generateClassList(){this.isOpened&&(this.styles.push(this.cellStyle.OPENED),this.styles.push(this.cellStyle.MINES_AROUND[this.VALUE])),this.classList=this.cellStyle.CELL,this.classList.add(...this.styles)}}const d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=document.createElement(e),s=[];for(var n=arguments.length,l=new Array(n>2?n-2:0),a=2;a<n;a++)l[a-2]=arguments[a];return l.forEach((e=>{Array.isArray(e)?e.forEach((e=>s.push(e))):e&&e.split(" ").forEach((e=>s.push(e)))})),s.length&&i.classList.add(...s),i.textContent=t,i};var c=e.p+"sounds/d18c894a8a7749662465.wav",m=e.p+"sounds/cc85f65b374a93b0d304.wav",u=e.p+"sounds/cbd6042033df6f19fdd0.wav",_=e.p+"sounds/9fd319fbd9fb38229c6f.wav",S=e.p+"sounds/c3f16e6dc072f45a4682.wav",L=e.p+"sounds/a721b1ee05687d92b579.wav";const{COUNTER_CLASS:v,CLICK_CLASS:M,CELL_ROW_TAG:E,CELL_ROW_CLASS:C,CELL_TAG:p,END_GAME_TEXT_CLASS:T,END_GAME_TEXT_WIN:N,END_GAME_TEXT_LOSE:O,FONT_RATIO:g,LAST_WINS_KEY:A,LOCAL_DATA_KEY:I,MAIN_CLASS:R,PLAYGROUND_TAG:U,PLAYGROUND_CLASS:f,TIMER_MS_CLASS:y,TIMER_SEC_CLASS:D,TIMER_MIN_CLASS:w}=t,{SOUND_SLIDER:k,THEME_SLIDER:V}=i;class H{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.easy,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.ROW_NUM=e.rowNum,this.COL_NUM=e.colNum,this.MINE_NUM=e.mineNum,this.savingData=t,this.isSound=i,this.setSounds(),this.getSavingData(t),this.cellClickHandler=this.cellClickHandler.bind(this),this.mediaQueryHandler=this.mediaQueryHandler.bind(this),this.appendPlayground(),this.startListners()}cells=[];mines=[];flags=[];isSound=!0;isDarkTheme=!0;isFirstClick=!0;isGameFinished=!1;timer=0;clicks=0;opened=0;getSavingData(e){if(!e)return;const t=JSON.parse(e);this.isSound=t.isSound,this.isDarkTheme=t.isDarkTheme,this.timer=t.timer,this.ROW_NUM=t.ROW_NUM,this.COL_NUM=t.COL_NUM,this.MINE_NUM=t.MINE_NUM,this.mines=t.mines,this.flags=t.flags,this.clicks=t.clicks,customElements.get(p)||customElements.define(p,r),this.cells=[];for(let e=0;e<this.ROW_NUM;e+=1){this.cells[e]=[];for(let i=0;i<this.COL_NUM;i+=1){const s=t.cells[e][i],n=new r(s.x,s.y,s.isOpened,s.VALUE);s.isOpened&&(this.opened+=1),n.isMine=s.isMine,n.isFlag=s.isFlag,n.textContent=s.textContent,this.cells[e].push(n)}}document.getElementById(k).checked=!this.isSound,this.setTimeValues(),a.startTimer(this.timer),document.querySelector(`.${M}`).textContent=this.clicks,this.flagCount()}setTimeValues(){const e=Math.floor(100*(this.timer-Math.floor(this.timer))),t=Math.floor(this.timer)-60*Math.floor(this.timer/60),i=Math.floor(this.timer/60);document.querySelector(`.${y}`).textContent=e<10?`0${e.toString()}`:e,document.querySelector(`.${D}`).textContent=t<10?`0${t.toString()}`:t,document.querySelector(`.${w}`).textContent=i<10?`0${i.toString()}`:i}setSounds(){this.audioBoom=new Audio(c),this.audioRemoveFlag=new Audio(u),this.audioRightAnsw=new Audio(L),this.audioFlagged=new Audio(S),this.audioFirstClick=new Audio(_),this.audioWin=new Audio(m)}startListners(){document.addEventListener("click",this.cellClickHandler),document.addEventListener("contextmenu",this.cellClickHandler),[window.matchMedia("(max-width: 1250px)"),window.matchMedia("(max-width: 767px)"),window.matchMedia("(orientation: portrait)"),window.matchMedia("(orientation: landscape)")].forEach((e=>e.addEventListener("change",this.mediaQueryHandler)))}mediaQueryHandler(){const e=this.getCellSize().numb,t=this.getCellSize().ext;for(let i=0;i<this.ROW_NUM;i+=1)for(let s=0;s<this.COL_NUM;s+=1){const n=this.cells[i][s];n.style.width=e+t,n.style.height=e+t,n.style.fontSize=e*r.FONT_RATIO+t}}endListners(){document.removeEventListener("click",this.cellClickHandler),document.removeEventListener("contextmenu",this.cellClickHandler)}async cellClickHandler(e){const t=e.target.closest(p);if(this.isGameFinished||!t||t.isOpened)return;if("contextmenu"===e.type)return e.preventDefault(),this.flagMarkClick(t),void this.saveDataToLocalStorage();if(t.isFlag)return;const{x:i,y:s}=t;if(document.querySelector(`.${M}`).textContent=++this.clicks,this.isFirstClick){this.isSound&&this.audioFirstClick.play();const e=await this.firstClick(i,s);if(this.saveDataToLocalStorage(),!e)return}t.isMine?this.mineClick(t):await this.openCell(i,s)||(this.isSound&&this.audioRightAnsw.play(),this.flagCount(),this.saveDataToLocalStorage())}saveDataToLocalStorage(){const e=[];for(let t=0;t<this.ROW_NUM;t+=1){e[t]=[];for(let i=0;i<this.COL_NUM;i+=1){const s=this.cells[t][i],n={};n.x=s.x,n.y=s.y,n.VALUE=s.VALUE,n.isOpened=s.isOpened,n.isMine=s.isMine,n.isFlag=s.isFlag,n.textContent=s.textContent,e[t].push(n)}}const t=document.getElementById(V).checked;console.log("dark ",t);const i={isSound:this.isSound,isDarkTheme:t,timer:a.timer,ROW_NUM:this.ROW_NUM,COL_NUM:this.COL_NUM,MINE_NUM:this.MINE_NUM,cells:e,mines:this.mines,flags:this.flags,clicks:this.clicks};localStorage.setItem(I,JSON.stringify(i))}async firstClick(e,t){if(this.isFirstClick=!1,this.savingData)return!0;do{this.appendPlayground()}while(0!==this.calcMinesAround(e,t));return document.addEventListener("contextmenu",this.cellClickHandler),this.flagCount(),await this.openCell(e,t),a.startTimer(this.timer),!1}getLocalSavedWins(){localStorage.getItem(A)}winClick(e){e.isWin();const t=JSON.parse(localStorage.getItem(A))||"";let i=Array.from(t);const s={date:new Date,timer:a.timer.toFixed(1),ROW_NUM:this.ROW_NUM,COL_NUM:this.COL_NUM,MINE_NUM:this.MINE_NUM,clicks:this.clicks};i.push(s),i.length>10&&(i=i.slice(-10)),localStorage.setItem(A,JSON.stringify(i)),this.isSound&&this.audioWin.play(),this.finishGame(),this.showEndText(!0)}showEndText(e){const t=d("div",e?N:O,T);document.body.append(t),document.addEventListener("click",(()=>t.remove()),{once:!0})}mineClick(e){this.isSound&&this.audioBoom.play(),e.isBoom(),this.mines=this.mines.filter((t=>t!==e.cellID)),this.finishGame(),this.showEndText(!1)}flagMarkClick(e){e.changeFlag(),e.isFlag?(this.isSound&&this.audioFlagged.play(),this.flags.push(e.cellID)):(this.isSound&&this.audioRemoveFlag.play(),this.removeFlag(e.cellID)),this.flagCount()}flagCount(){document.querySelector(`.${v}`).textContent=this.MINE_NUM-this.flags.length}removeFlag(e){this.flags=this.flags.filter((t=>t!==e))}cleanCurrentStatusData(){localStorage.removeItem(I)}finishGame(){this.cleanCurrentStatusData(),this.endListners(),a.stopTimer(),this.isGameFinished=!0,this.mines.forEach((e=>{const[t,i]=e.split("-"),s=this.cells[t][i];s.showMine(),-1!==this.flags.indexOf(e)&&(this.removeFlag(e),s.isCorrectFlag(!0))})),this.flags.forEach((e=>{const[t,i]=e.split("-");this.cells[t][i].isCorrectFlag(!1)}))}getCellSize(){const e=90/this.COL_NUM,t=70/this.ROW_NUM,i=window.innerWidth/window.innerHeight;return{numb:Math.min(e,t).toFixed(2),ext:i<1?"vw":"vh"}}makePlayground(){customElements.get(p)||customElements.define(p,r);const e=d(U,"",f);if(this.savingData)return this.makePlaygrFromSavingData(e);this.cells=[];const t=this.getCellSize();for(let i=0;i<this.ROW_NUM;i+=1){const s=d(E,"",C);this.cells[i]=[];for(let e=0;e<this.COL_NUM;e+=1){const n=new r(i,e);n.style.width=t.numb+t.ext,n.style.height=t.numb+t.ext,n.style.fontSize=t.numb*g+t.ext,this.cells[i].push(n),s.append(n)}e.append(s)}this.insertMines();for(let e=0;e<this.ROW_NUM;e+=1)for(let t=0;t<this.COL_NUM;t+=1)this.cells[e][t].VALUE=this.calcMinesAround(e,t);return e}makePlaygrFromSavingData(e){const t=this.getCellSize();for(let i=0;i<this.ROW_NUM;i+=1){const s=d(E,"",C);for(let e=0;e<this.COL_NUM;e+=1){const n=this.cells[i][e];n.style.width=t.numb+t.ext,n.style.height=t.numb+t.ext,n.style.fontSize=t.numb*g+t.ext,s.append(this.cells[i][e])}e.append(s)}return e}appendPlayground(){let e=document.querySelector(`.${f}`);e&&e.remove(),e=this.makePlayground(),document.querySelector(R).append(e)}insertMines(){let e=0;for(this.mines=[];e<this.MINE_NUM;){const t=Math.floor(Math.random()*this.ROW_NUM),i=Math.floor(Math.random()*this.COL_NUM);this.cells[t][i].isMine||(this.cells[t][i].isMine=1,this.mines.push(this.cells[t][i].cellID),e+=1)}}calcMinesAround(e,t){if(this.outBounds(e,t))return 0;let i=0;for(let s=-1;s<=1;s+=1)for(let n=-1;n<=1;n+=1){const l=s+e,a=n+t;this.outBounds(l,a)||(i+=this.cells[l][a].isMine)}return i}async openCell(e,t){if(this.outBounds(e,t))return!1;const i=this.cells[e][t];return!i.isOpened&&(i.openCell(),this.removeFlag(i.cellID),await new Promise((e=>{setTimeout(e,10)})),this.opened+=1,this.opened===this.ROW_NUM*this.COL_NUM-this.MINE_NUM?(this.winClick(i),!0):0===i.VALUE&&(await this.openCell(e,t-1),await this.openCell(e,t+1),await this.openCell(e-1,t),await this.openCell(e+1,t),await this.openCell(e-1,t-1),await this.openCell(e-1,t+1),await this.openCell(e+1,t-1),void await this.openCell(e+1,t+1)))}outBounds(e,t){return e<0||t<0||e>=this.ROW_NUM||t>=this.COL_NUM}}const{COUNTER_CLASS:x,COUNTER_WRAPPER_CLASS:F,COUNTER_TITLE_CLASS:W,CLICK_WRAPPER_CLASS:b,CLICK_TITLE_CLASS:B,CLICK_CLASS:G,INFO_SECTION_CLASS:P,LAST_WINS_KEY:$,LOCAL_DATA_KEY:Y,MAIN_TAG:K,MAIN_CLASS:X,START_BTN_CLASS:q,SETTINGS_BTN:z,SETTINGS_BTN_CLASS:J,THEME_LIGHT:Q,TIMER_CLASS:j,TIMER_MS_CLASS:Z,TIMER_SEC_CLASS:ee,TIMER_MIN_CLASS:te}=t,{MODAL_OVERLAY:ie,MODAL_CLASS:se,MODAL_TITLE:ne,MODAL_SCORE_TBL:le,MODAL_RESULT_TITLES:ae,RESULT_TITLE_DATE:oe,RESULT_TITLE_SIZE:he,RESULT_TITLE_MINES:re,RESULT_TITLE_TIME:de,RESULT_TITLE_CLICKS:ce,MODAL_RESULT_ROW:me}={MODAL_OVERLAY:"modal-overlay",MODAL_CLASS:"modal-score",MODAL_TITLE:"modal-score-title",MODAL_SCORE_TBL:"modal-score-tbl",MODAL_RESULT_TITLES:"score-tbl-titles",RESULT_TITLE_DATE:"Date",RESULT_TITLE_SIZE:"Size",RESULT_TITLE_MINES:"Mines",RESULT_TITLE_TIME:"Time",RESULT_TITLE_CLICKS:"Clicks",MODAL_RESULT_ROW:"score-tbl-results"},{NAV_MENU:ue,MENU_OVERLAY:_e,NAV_MENU_ACTIVE:Se,NAV_MENU_WRAPPER:Le,NAV_CLOSE_BTN:ve,NAV_CLOSE_BTN_CLASS:Me,MENU_TITLE:Ee,MENU_TITLE_SCORE:Ce,MENU_LEVEL:pe,SLIDER_WRAPPER:Te,WRAPPER_THEME:Ne,WRAPPER_SOUND:Oe,CUSTOM_DONE_BTN:ge,CUSTOM_LEVEL_FORM:Ae,THEME_SLIDER:Ie,SOUND_SLIDER:Re,CUSTOM_ROW_MAX:Ue,CUSTOM_ROW_MIN:fe,CUSTOM_MINE_RATIO_MIN:ye,CUSTOM_MINE_RATIO_MAX:De,CUSTOM_COLUMN_MAX:we,CUSTOM_COLUMN_MIN:ke,CUSTOM_LEVEL_WRAP_CLASS:Ve,CUSTOM_COLUMN_VAL:He,CUSTOM_ROW_VAL:xe,CUSTOM_MINES_VAL:Fe,LEVEL_ID_EASY:We,LEVEL_ID_MEDIUM:be,LEVEL_ID_HARD:Be,LEVEL_ID_CUSTOM:Ge}=i,Pe={modalOverlay:"",start(){this.modalCloseHandler=this.modalCloseHandler.bind(this),this.makeModal(),this.closeBtn.addEventListener("click",this.modalCloseHandler,{once:!0})},modalCloseHandler(){this.modalOverlay.remove()},makeModal(){this.modalOverlay=d("div","",ie);const e=d("div","",se);this.closeBtn=d("div",ve,Me),this.closeBtn.title="Close";const t=d("div","Score",ne);this.modalScoreTable=d("div","",le);const i=d("div","",ae);[d("div",oe),d("div",he),d("div",re),d("div",de),d("div",ce)].forEach((e=>i.append(e))),this.modalScoreTable.append(i),this.appendSavedScoreData(),e.append(this.closeBtn),e.append(t),e.append(this.modalScoreTable),this.modalOverlay.append(e),document.body.append(this.modalOverlay)},appendSavedScoreData(){const e=localStorage.getItem($),t=JSON.parse(e);if(!t)return!1;[...t].sort(((e,t)=>e.date<t.date?1:-1)).forEach((e=>{const t=d("div","",me),i=e.date?new Date(e.date).toLocaleString():"";[d("td",i),d("td",`${e.ROW_NUM} x ${e.COL_NUM}`),d("td",e.MINE_NUM),d("td",`${e.timer} s`),d("td",e.clicks)].forEach((e=>t.append(e))),this.modalScoreTable.append(t)}))}},$e={menuNav:"",menuOverlay:"",scoreTitle:"",start(){this.disactivateMenu=this.disactivateMenu.bind(this),this.levelClickHandler=this.levelClickHandler.bind(this),this.soundSliderChangeHandler=this.soundSliderChangeHandler.bind(this),this.themeSliderChangeHandler=this.themeSliderChangeHandler.bind(this),this.modalScoreHandler=this.modalScoreHandler.bind(this),this.customMineInputHandler=this.customMineInputHandler.bind(this),this.makeMenuNav()},makeMenuNav(){this.menuNav=d("nav","",ue),this.closeBtn=d("div",ve,Me),this.closeBtn.title="Close";const e=d("div","",Le);this.scoreTitle=d("div","Score",Ee,Ce);const t=d("div","");t.append(this.scoreTitle);const i=d("div",""),s=d("div","Theme",Ee),n=d("div","",Te,Ne),l=d("label","");this.themeSlider=d("input","",Ie),this.themeSlider.id=Ie,this.themeSlider.type="checkbox",this.themeSlider.checked=!0,l.htmlFor=this.themeSlider.id,n.append(this.themeSlider),n.append(l),i.append(s),i.append(n);const a=d("div",""),o=d("div","Sound",Ee),h=d("div","",Te,Oe),r=d("label","");this.soundSlider=d("input","",Ie),this.soundSlider.id=Re,this.soundSlider.type="checkbox",r.htmlFor=this.soundSlider.id,h.append(this.soundSlider),h.append(r),a.append(o),a.append(h);const c=d("div","");this.levelTitle=d("div","Level",Ee),this.menuLevels=d("div","",pe),this.leveldivEasy=d("div","Easy",We),this.leveldivEasy.dataset.level="easy",this.leveldivMed=d("div","Medium",be),this.leveldivMed.dataset.level="medium",this.leveldivHard=d("div","Hard",Be),this.leveldivHard.dataset.level="hard",this.leveldivCustom=d("div","Custom",Ge),this.leveldivCustom.dataset.level="custom",this.customLevelForm=d("div","",Ae);const m=d("div","",Ve),u=d("div",`Rows: (${ke}-${we})`);this.customColumnVal=d("input","",He),this.customColumnVal.type="number",this.customColumnVal.maxLength=2,this.customColumnVal.max=we,this.customColumnVal.min=ke,m.append(u),m.append(this.customColumnVal);const _=d("div","",Ve),S=d("div",`Columns: (${fe}-${Ue})`);this.customRowVal=d("input","",xe),this.customRowVal.type="number",this.customRowVal.maxLength=2,this.customRowVal.max=Ue,this.customRowVal.min=fe,_.append(S),_.append(this.customRowVal);const L=d("div","",Ve);this.mineTitleDiv=d("div","Mines: "),this.customMineVal=d("input","",Fe),this.customMineVal.type="number",this.customMineVal.maxLength=3,this.customMineVal.max=999,L.append(this.mineTitleDiv),L.append(this.customMineVal),this.startBtn=d("div","Done","btn",ge),this.customLevelForm.append(m),this.customLevelForm.append(_),this.customLevelForm.append(L),this.customLevelForm.append(this.startBtn),this.menuLevels.append(this.leveldivEasy),this.menuLevels.append(this.leveldivMed),this.menuLevels.append(this.leveldivHard),this.menuLevels.append(this.leveldivCustom),c.append(this.levelTitle),c.append(this.menuLevels),c.append(this.customLevelForm),e.append(t),e.append(i),e.append(a),e.append(c),this.menuNav.append(this.closeBtn),this.menuNav.append(e),document.body.append(this.menuNav)},activateMenu(){this.addListners(),this.menuNav.classList.add(Se),this.addMenuOverlay()},disactivateMenu(){this.toggleLevelMenu(!1),this.menuNav.classList.remove(Se),this.menuOverlay.remove(),this.removeListners()},addListners(){this.closeBtn.addEventListener("click",this.disactivateMenu),this.scoreTitle.addEventListener("click",this.modalScoreHandler),this.menuLevels.addEventListener("click",this.levelClickHandler),this.themeSlider.addEventListener("change",this.themeSliderChangeHandler),this.soundSlider.addEventListener("change",this.soundSliderChangeHandler)},removeListners(){this.closeBtn.removeEventListener("click",this.disactivateMenu),this.menuLevels.removeEventListener("click",this.levelClickHandler),this.scoreTitle.removeEventListener("click",this.modalScoreHandler),this.themeSlider.removeEventListener("change",this.themeSliderChangeHandler),this.soundSlider.removeEventListener("change",this.soundSliderChangeHandler)},modalScoreHandler(){this.disactivateMenu(),Pe.start()},soundSliderChangeHandler(){Ye.play.isSound=!this.soundSlider.checked},themeSliderChangeHandler(){this.themeSlider.checked?document.body.classList.remove(Q):document.body.classList.add(Q)},addListnersForCustomInput(){[this.customColumnVal,this.customRowVal,this.customMineVal].forEach((e=>{e.addEventListener("blur",(e=>this.inputBlurHandler(e)))}))},toggleLevelMenu(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];console.log("toggleLevelMenu"),this.customLevelForm.classList.contains(Se)||!e?(this.customLevelForm.classList.remove(Se),this.removeListnersForCustomInput()):(this.customLevelForm.classList.add(Se),this.addListnersForCustomInput())},removeListnersForCustomInput(){[this.customColumnVal,this.customRowVal,this.customMineVal].forEach((e=>{e.removeEventListener("blur",(e=>this.inputBlurHandler(e)))})),this.customMineVal.removeEventListener("focus",this.customMineInputHandler)},inputBlurHandler(e){const t=e.target;+t.value>+t.max?t.value=t.max:+t.value<+t.min&&(t.value=t.min)},levelClickHandler(e){if(e.target===this.leveldivEasy||e.target===this.leveldivMed||e.target===this.leveldivHard||e.target===this.leveldivCustom){const t=e.target;if(e.target===this.leveldivCustom)return this.toggleLevelMenu(),this.customMineVal.addEventListener("focus",this.customMineInputHandler),void this.startBtn.addEventListener("click",(e=>this.startCustomLevelHandler(e)),{once:!0});Ye.restartBtnHandler("",h[t.dataset.level]),this.disactivateMenu()}},customMineInputHandler(){const e=Math.max(+this.customColumnVal.value,ke)*Math.max(+this.customRowVal.value,fe),t=Math.ceil(e*ye),i=Math.ceil(e*De);console.log("maxCellNum"),this.mineTitleDiv.textContent=`Mines (${t}-${i}):`},startCustomLevelHandler(){const e=+this.customColumnVal.value*+this.customRowVal.value,t=Math.ceil(e*ye),i=Math.ceil(e*De);console.log("maxMine ",i);const s=Math.min(Math.max(+this.customMineVal.value,t),i);h.setParams(+this.customColumnVal.value,+this.customRowVal.value,s),Ye.restartBtnHandler("",h.custom),this.disactivateMenu(),[this.customColumnVal,this.customRowVal,this.customMineVal].forEach((e=>e.value=""))},addMenuOverlay(){this.menuOverlay=d("div","",_e),this.menuOverlay.addEventListener("click",(e=>this.disactivateMenu(e)),{once:!0}),document.body.prepend(this.menuOverlay)}},Ye={storageData:"",start(){this.makeMainSection(),this.makeInfoSection(),$e.start(),this.getStorageData(),this.setTheme(),this.play=new H(h.easy,this.storageData),this.addMainLayoutListners()},getStorageData(){this.storageData=localStorage.getItem(Y)||""},setTheme(){if(!this.storageData)return;const e=JSON.parse(this.storageData);console.log(e),$e.themeSlider.checked=e.isDarkTheme,$e.themeSliderChangeHandler()},makeMainSection(){this.mainSection=d(K,"",X),document.body.append(this.mainSection)},makeInfoSection(){const e=d("section","",P),t=d("div","",F),i=d("div","Mines: ",W);this.counterDiv=d("div","0",x),t.append(i),t.append(this.counterDiv);const s=d("div","",b),n=d("div","Clicks: ",B);this.clickDiv=d("div","0",G),s.append(n),s.append(this.clickDiv),this.startBtn=d("div","Restart","btn",q),this.settingsBtn=d("div",z,J),this.settingsBtn.title="Menu";const l=d("div","",j);this.ms=d("div","00",Z),this.second=d("div","00",ee),this.minute=d("div","00",te),l.append(this.minute),l.append(this.second),l.append(this.ms),e.append(t),e.append(s),e.append(this.startBtn),e.append(l),e.append(this.settingsBtn),document.body.append(e)},restartBtnHandler(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.easy;void 0!==this.play&&(localStorage.removeItem(Y),a.stopTimer(),this.ms.textContent="00",this.second.textContent="00",this.minute.textContent="00",this.counterDiv.textContent="0",this.clickDiv.textContent="0",this.mainSection.innerHTML="",this.play.finishGame(),this.play=new H(e,"",!$e.soundSlider.checked))},showMenu(){$e.activateMenu()},addMainLayoutListners(){this.startBtn.addEventListener("click",(e=>this.restartBtnHandler(e))),this.settingsBtn.addEventListener("click",(e=>this.showMenu(e)))}};Ye.start()}();